<!DOCTYPE html>


<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Monitoring as a Service</title>

    

    
<link rel="stylesheet" href="_static/css/reveal.min.css">
<link rel="stylesheet" href="_static/css/theme/default.css" id="theme">
<link rel="stylesheet" href="_static/lib/css/zenburn.css">
<link rel="stylesheet" href="_static/revealjs.css" type="text/css" />

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write('<link rel="stylesheet" href="_static/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="_static/lib/js/html5shiv.js"></script>
    <![endif]-->

  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        
  <section>
<h2>Supervision OpenStack</h2>
<p class="first">MONaaS</p>
<br/>
<br/><p>Alexandre Viau</p>
<small>
<a class="reference external" href="mailto:alexandre&#46;viau&#37;&#52;&#48;savoirfairelinux&#46;com">alexandre<span>&#46;</span>viau<span>&#64;</span>savoirfairelinux<span>&#46;</span>com</a></small>
<p>Thibault Cohen</p>
<small>
<a class="reference external" href="mailto:thibault&#46;cohen&#37;&#52;&#48;savoirfairelinux&#46;com">thibault<span>&#46;</span>cohen<span>&#64;</span>savoirfairelinux<span>&#46;</span>com</a></small>
<br/>
<br/><small class="last">
<div class="first last"><a href="javascript:printIt()">version PDF </a>
<script>
        function printIt(printThis) {
        url = location.protocol + "//" + location.hostname + location.pathname + "?print-pdf"
        child = window.open(url);  //Open the child in a tiny window.
        window.focus();  //Hide the child as soon as it is opened.
        child.print();  //Print the child.
        //child.close();  //Immediately close the child.
        }
</script></div></small>
</section>
<section>
<h2>Monitoring as a Servce</h2>
<p class="first">MONaas</p>
<br/><ul class="last simple">
<li><a class="reference external" href="https://blueprints.launchpad.net/ceilometer/+spec/monitoring-as-a-service">https://blueprints.launchpad.net/ceilometer/+spec/monitoring-as-a-service</a></li>
</ul>
</section>
<section>
<h2>Qu'est-ce que la supervision?</h2>
<ul class="first last simple">
<li>Exécute des vérifications</li>
<li>Applique des règles</li>
<li>Alerte les utilisateurs</li>
<li>Stocke un historique des données</li>
</ul>
</section>
<section>
<section class="first">
<h2>L'État de la supervision dans le cloud</h2>
</section>
<section>
<a class="first reference external image-reference" href="https://aws.amazon.com/cloudwatch/"><img alt="Amazon CloudWatch" src="_images/amazon_cloudwatch.png" style="width: 588px; height: 144px;" /></a>
<p class="fragment">&#8220;<strong>Amazon CloudWatch</strong> fournit une surveillance pour les ressources du cloud AWS et les applications que les clients exécutent sur AWS.&#8221;</p>
<div class="fragment last"><ul>
<li class="fragment">Supervision passive seulement</li>
<li class="fragment">API Put pour métriques personnalisées</li>
<li class="fragment">Alarmes</li>
<li class="fragment">Utilisez Auto Scaling pour ajouter ou supprimer
dynamiquement des instances Amazon EC2 en fonction de vos mesures Amazon
CloudWatch</li>
</ul></div></section>
<section class="last">
<a class="first reference external image-reference" href="https://monitoring.api.rackspacecloud.com/"><img alt="Rackspace Cloud Monitoring" src="_images/rackspace-cloud-monitoring.png" style="width: 588px; height: 144px;" /></a>
<div class="fragment last"><ul>
<li class="fragment">Supervision <b>active</b> et passive</li>
 <li class="fragment">Vérification de services</li>
<li class="fragment">API Put pour métriques personnalisées</li>
<li class="fragment">Alarmes</li>
<li class="fragment">Agent in-instance</li>
</ul></div></section>
</section>
<section>
<section class="first">
<h2>OpenStack Telemetry</h2>
<h3>Ceilometer</h3>
<a class="first last reference external image-reference" href="https://wiki.openstack.org/wiki/Ceilometer"><img alt="Ceilometer" src="_images/ceilometer.jpg" /></a>
</section>
<section>
<p class="first"><strong>Objectif initial</strong></p>
<p>Être l&#8217;unique point de contact pour les <strong>systèmes de facturation</strong> et d&#8217;acquérir toutes les <strong>mesures</strong> dont ceux ci ont besoin pour effectuer la facturation à travers l&#8217;ensemble des composants d&#8217;OpenStack.</p>
<a class="last reference external image-reference" href="http://docs.openstack.org/developer/ceilometer/measurements.html:alt:RubanMesurer:width:300:height:300"><img alt="_images/ruban_mesurer.png" src="_images/ruban_mesurer.png" /></a>
</section>
<section>
<p class="first"><strong>Depuis Grizzly:</strong></p>
<p>Devenir l&#8217;infrastructure pour la collecte de mesures dans OpenStack afin d&#8217;éviter que deux agents soient développés pour acquérir les mêmes données. Le but principal de Ceilometer est le <strong>monitoring</strong> et le metering.</p>
<a class="last reference internal image-reference" href="_images/nsa.png"><img alt="caméra" src="_images/nsa.png" style="width: 300px; height: 300px;" /></a>
</section>
<section class="last">
<h2>Les métriques disponibles dans Ceilometer</h2>
<div class="fragment first last"><ul>
<li class="fragment">Utilisation CPU</li>
<li class="fragment"­>Utilisation mémoire</li>
<li class="fragment">Utilisation du disque</li>
<li class="fragment">Trafic réseau</li>
</ul></div></section>
</section>
<section>
<h2>Ce qui manque...</h2>
<div class="fragment first last"><ul>
<li class="fragment">Polling</li>
<li class="fragment">Disponibilité de services</li>
<li class="fragment">Données applicatives</li>
<li class="fragment">Scénarios de vérification</li>
<li class="fragment">Règles d'affaires</li>
<li class="fragment">Scaling sur les données applicatives</li>
</ul></div></section>
<section>
<section class="first">
<h2>Fil conducteur...</h2>
</section>
<section>
<h2>Monitoring as a Service</h2>
<ul class="fragment first simple">
<li>API RESTful</li>
<li><strong>Hautement disponible</strong></li>
<li>Tolérant aux erreurs</li>
<li>Autosupervisé</li>
</ul>
<div class="last"><aside class="notes">
    Le SLA doit être beaucoup plus haut que celui de l'application.
</aside></div></section>
<section>
<h2>Ce que cela apporterait</h2>
</section>
<section>
<h2>Polling d'agents dans les instances</h2>
<ul class="fragment first last simple">
<li>NRPE</li>
<li>SNMP</li>
<li>SSH</li>
<li>etc... Nouveau protocole??</li>
</ul>
</section>
<section>
<h2>Supervision des services</h2>
<ul class="fragment first last simple">
<li>Disponibilité</li>
<li>Temps de réponse</li>
<li>Scénarios HTTP</li>
<li>Protocoles TCP/UDP (NTP, DNS, MYSQL, SMTP, IMAP, ...)</li>
</ul>
</section>
<section>
<h2>Supervision depuis plusieurs sites</h2>
<div class="fragment first last"><ul>
<li class="fragment">Expérience utilisateurs depuis plusieurs sites</li>
<li class="fragment">Assurer la disponibilité</li>
<li class="fragment">Supervision plus complète</li>
<li class="fragment">Comment est-ce que les utilisateurs de Montréal vivent la release localisée d'un nouveau module de notre application?</li>
</ul></div></section>
<section class="last">
<h4>Supervision depuis plusieurs sites (schéma)</h4>
<img alt="_images/verification-multi-site.png" class="first last" src="_images/verification-multi-site.png" />
</section>
</section>
<section>
<section class="first last">
<h2>Nos démarches</h2>
<div class="fragment first"> <ul>
 <li class="fragment">Soumission du blueprint</li>
 <li class="fragment">Openstack-dev</li>
 <li class="fragment">Contact avec l'équipe de Ceilometer</li>
</ul></div><div class="last"><aside class="notes">
    Réaction de HP
    <br>Meetings IRC
</aside></div></section>
</section>
<section>
<section class="first">
<h2>Pistes d'exploration</h2>
</section>
<section>
<h3>hpcloud-mon</h3>
<a class="first last reference internal image-reference" href="_images/hpmon.png"><img alt="_images/hpmon.png" src="_images/hpmon.png" style="width: 80%;" /></a>
</section>
<section data-background="_static/images/openstack_havana_conceptual_arch.png" data-background-size="auto 95%" data-transition="fade">
</section>
<section data-background="_static/images/openstack_havana_conceptual_arch2.png" data-background-size="auto 95%" data-transition="fade">
</section>
<section>
<h2>Shinken comme coeur de supervision ?</h2>
<ul class="first last simple">
<li>Compatibilité Nagios</li>
<li>Écrit en Python</li>
<li>Architecture modulaire</li>
<li>Intégration possible dans Horizon</li>
</ul>
</section>
<section>
<h3>Exemple d'implémentation avec Shinken</h3>
<img alt="_images/shinken_in_openstack.png" class="first last" src="_images/shinken_in_openstack.png" />
</section>
<section>
<h3>Exemple d'implémentation avec Shinken</h3>
<img alt="_images/shinken_openstack_multisite.png" class="first last" src="_images/shinken_openstack_multisite.png" />
</section>
<section>
<h2>Supervision de l'infrastructure OpenStack</h2>
<ul class="first simple">
<li>Disponibilité de chaque élément d&#8217;OpenStack à travers l&#8217;API</li>
<li>Performance de chaque éléments d&#8217;OpenStack à travers Ceilometer</li>
<li>Supervision des événements à travers RabbitMQ</li>
</ul>
<div class="last"><aside class="notes">
    Monitoring actuel Nagios
</aside></div></section>
<section>
<h2>Supervision sur terre</h2>
<ul class="first simple">
<li>Supervision standard de l&#8217;infrastructure<ul>
<li>Serveurs</li>
<li>Switches</li>
<li>Firewall</li>
<li>SAN</li>
<li>...</li>
</ul>
</li>
</ul>
<div class="last"><aside class="notes">
    Monitoring actuel Nagios
</aside></div></section>
<section class="last">
<h2>En résumé</h2>
<div class="first"><br/></div><p>Supervision de trois niveaux :</p>
<br/><ul class="simple">
<li>Des applicatifs (Support de StatD, ...)</li>
<li>De la plate-forme (Apache, Mysql, Reddis, ...)</li>
<li>De l&#8217;infrastructure (CPU, mémoire, IO, ...)</li>
</ul>
<br/>
<br/><p class="last">Le concept de royaume dans Shinken permettrait d&#8217;effectuer la superivision de ces trois niveaux, de façon indépendante</p>
</section>
</section>
<section>
<section class="first last">
<h2>références</h2>
<ul class="first last simple">
<li>Blueprint MONaas: <a class="reference external" href="https://blueprints.launchpad.net/ceilometer/+spec/monitoring-as-a-service">https://blueprints.launchpad.net/ceilometer/+spec/monitoring-as-a-service</a></li>
<li>Page wiki: <a class="reference external" href="https://wiki.openstack.org/wiki/MONaaS">https://wiki.openstack.org/wiki/MONaaS</a></li>
<li>Annoncement sur openstack-dev: <a class="reference external" href="http://lists.openstack.org/pipermail/openstack-dev/2014-May/034189.html">http://lists.openstack.org/pipermail/openstack-dev/2014-May/034189.html</a></li>
</ul>
</section>
</section>
<section>
<section class="first last">
<h2>Questions / Discussion</h2>
<a class="first reference internal image-reference" href="_images/qrcode_presentation.svg"><img height="510" src="_images/qrcode_presentation.svg" width="510" /></a>
<p class="last">⇑⇑ savoirfairelinux.github.io/MONaaS-presentation ⇑⇑</p>
</section>
</section>


      </div>
    </div>
    
<script src="_static/js/jquery.min.js"></script>
<script src="_static/lib/js/head.min.js"></script>
<script src="_static/js/reveal.js"></script>
    <script>

      // change DOM for reveal.js
      $("div.section h1").remove();
      var content = $("div.section").html();
      $("div.section").remove();
      $("div.slides").html(content);

      Reveal.initialize({
        width: 960,
        height: 700,

        margin: 0.1,

        minScale: 0.2,
        maxScale: 1.0,

        controls: true,
        progress: true,
        history: true,
        center: true,

        keyboard : true,
        overview: true,
        touch: true,
        loop: false,
        rtl: false,
        fragments: true,

        autoSlide: 0,
        mouseWheel: false,
        rollingLinks: true,
        previewLinks: false,

        transitionSpeed: "default",
        backgroundTransition: "default",

        theme: Reveal.getQueryHash().theme || "sky", // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || "linear", // default/cube/page/concave/zoom/linear/fade/none

        dependencies: [
        { src: '_static/lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: '_static/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '_static/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '_static/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: '_static/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: '_static/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });
    </script>
  </body>
</html>